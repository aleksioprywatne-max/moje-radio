<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YoungMafijja FM | Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <style>
        :root { --accent: #d63031; --bg: #f5f6fa; --text: #2f3640; --card: #ffffff; }
        body.dark-mode { --bg: #1e272e; --text: #f5f6fa; --card: #2f3640; }
        
        body { font-family: 'Montserrat', sans-serif; background: var(--bg); color: var(--text); margin: 0; transition: 0.3s; }
        
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 15px 5%; background: var(--card); box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        
        /* Styl Awatara w rogu */
        .user-area { display: flex; align-items: center; gap: 15px; }
        .avatar-container { display: none; position: relative; width: 45px; height: 45px; cursor: pointer; }
        .avatar-img { width: 100%; height: 100%; border-radius: 50%; border: 2px solid var(--accent); object-fit: cover; }
        
        .auth-btns button { background: var(--accent); color: white; border: none; padding: 8px 15px; border-radius: 20px; cursor: pointer; font-weight: bold; }

        .container { max-width: 900px; margin: 40px auto; padding: 20px; text-align: center; }
        .main-card { background: var(--card); padding: 40px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        
        .logo-main { width: 180px; border-radius: 50%; border: 4px solid var(--accent); margin-bottom: 20px; }
        
        /* Panel zam贸wie piosenek */
        #request-panel { display: none; margin-top: 30px; padding: 20px; border: 2px dashed var(--accent); border-radius: 20px; }
        input { width: 70%; padding: 12px; border-radius: 10px; border: 1px solid #ccc; margin: 10px 0; }
        .send-btn { background: #2ecc71; color: white; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body id="page">

<nav class="navbar">
    <div style="font-weight: 900; font-size: 1.5rem;">YoungMafijja <span style="color:var(--accent)">FM</span></div>
    
    <div class="user-area">
        <div id="auth-btns" class="auth-btns">
            <button onclick="login()">Zaloguj / Zarejestruj</button>
        </div>
        <div id="user-profile" class="avatar-container" title="Kliknij, aby zmieni awatar" onclick="document.getElementById('fileInput').click()">
            <img id="display-avatar" src="avatar.png" class="avatar-img">
            <input type="file" id="fileInput" hidden onchange="changeAvatar(this)">
        </div>
        <button onclick="toggleTheme()" style="border-radius: 50%; border: none; cursor: pointer; padding: 8px;"></button>
    </div>
</nav>

<div class="container">
    <div class="main-card">
        <img src="logo.png" class="logo-main">
        <h1>Radio On-Air</h1>
        
        <audio id="radio-player" controls style="width: 100%;">
            <source src="https://stream.zeno.fm/oxfrdtyiy4auv" type="audio/mpeg">
        </audio>

        <div id="request-panel">
            <h3>Zam贸w piosenk</h3>
            <p>Tytu zostanie wysany bezporednio do studia!</p>
            <input type="text" id="song-name" placeholder="Artysta - Tytu...">
            <br>
            <button class="send-btn" onclick="sendOrder()">WYLIJ DO RADIA</button>
        </div>
        
        <p id="guest-text" style="margin-top: 20px; opacity: 0.6;">Tylko zalogowani czonkowie mafii mog zamawia piosenki.</p>
    </div>
</div>

<script>
    // Inicjalizacja EmailJS (Wpisz sw贸j klucz tutaj)
    emailjs.init("TWOJ_PUBLIC_KEY"); 

    function login() {
        // Symulacja logowania na potrzeby GitHub Pages
        alert("Zalogowano czonka YoungMafijja FM!");
        document.getElementById('auth-btns').style.display = 'none';
        document.getElementById('user-profile').style.display = 'block';
        document.getElementById('request-panel').style.display = 'block';
        document.getElementById('guest-text').style.display = 'none';
    }

    function changeAvatar(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('display-avatar').src = e.target.result;
            }
            reader.readAsDataURL(input.files[0]);
        }
    }

    function sendOrder() {
        const song = document.getElementById('song-name').value;
        if (!song) return alert("Wpisz tytu piosenki!");

        const params = {
            to_email: "TWOJ-MAIL@GMAIL.COM", // Tw贸j mail
            message: song,
            from_name: "Suchacz YoungMafijja"
        };

        // UWAGA: Musisz skonfigurowa Service ID i Template ID w EmailJS
        emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', params)
            .then(() => {
                alert("Piosenka '" + song + "' wysana do bazy!");
                document.getElementById('song-name').value = "";
            }, (err) => {
                alert("Bd wysyki. Sprawd藕 konfiguracj EmailJS.");
            });
    }

    function toggleTheme() {
        document.getElementById('page').classList.toggle('dark-mode');
    }
</script>

</body>
</html>
